<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="content-type" content="text/html" >
	<meta http-equiv="Pragma" content="no-cache">
	<meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,width=device-width"/>
	<meta name="app-mobile-web-app-capable"  content="yes" />
	<meta name="app-mobile-web-app-status-bar-style" content="black-translucent" /> 
	<title>搜索</title>
	<style type="text/css">
		
		html,body,p{
			margin: 0;
			padding: 0;
			width: 100%;
			height: 100%;
		}
		.yt-popup-bg{
			position: fixed;
			width: 100%;
			height: 100%;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background-color: rgba(0,0,0,.5);

			z-index: 10;
		}
		.yt-search-con{
			width: 18rem;
			height: auto;
			position: absolute;
			top: 50%;
			transform: translateY(-60%);
			left: 0;
			right: 0;
			margin: auto;
			background-color: #fff;
			border-radius: 16px;
			text-align: center;
		}
		.yt-search-img{
			vertical-align: middle;
			padding:1.5rem 0;
			width: 2rem;
		}
		.yt-search-title{
			font-size: 23px;
			font-weight: bold;
			color: #4C0D0A;
			margin-top: 18px;
		}
		.yt-search-title-s {
			font-size: 14px;
			color: #4C0D0A;
			font-weight:bold;
			text-align: center;
			margin-top: 6px;
		}
		.yt-search-info{
			/* height: 3em; */
			text-align: center;
			font-size: .9rem;
			padding:0 2rem;
			margin-top: 10px;
		}
		.yt-search-cancle{
			padding: 0 35px;
			height: 39px;
			line-height: 39px;
			border: 1px solid #FF4545;
			border-radius: 3px;
			color: #FF4545;
			float: left;
		}
		.yt-search-confirm{
			padding: 0 35px;
			height: 40px;
			line-height: 40px;
			background-color: #FF4545;
			color: #fff;
			border-radius: 3px;
			float: right;
		}
		.yj-clearfix:after {
		  content: "";
		  display: block;
		  height: 0;
		  clear: both;
		  visibility: hidden;
		}
		.yj-elip-2 {
		  display: -webkit-box;
		  overflow: hidden;
		  text-overflow: ellipsis;
		  word-wrap: break-word;
		  white-space: normal !important;
		  -webkit-line-clamp: 2;
		  -webkit-box-orient: vertical;
		}
		.goGoodsDetail{display: none;}
		.goSearch{display: inline;}
		.goods-img{width:4rem;height:4rem;margin-right:0.5rem;display: none;}
		.goods{height:16.5rem;}
		.goods .goods-img{display: inline;}
		.goods .yt-search-info{margin:0;height:3.4rem;line-height:1.7rem;padding:0;}
		.goods .bg{background:#fff;padding:1rem;}
		.goods .goGoodsDetail{display: inline;}
		.goods .goSearch{display: none;}
		.yj-clearfix{padding:1.5rem;}

		.row{display:flex;flex-direction: row;}
		.center{justify-content: center;align-items:center;}
		.middle{align-items: center;vertical-align: middle;}
		.flex1{flex:1;}
		.search_bar {
			background-image: url(../../../static/image/common/search.png);
			background-size: 100% 100%;
			height: 80px;
			overflow: hidden;
		}
		.comfirm_btn {
			width: 244px;
			height: 34px;
			line-height: 34px;
			text-align: center;
			background-image: url(../../../static/image/common/search_img.png);
			color: #333333;
			font-size: 15px;
			background-size: 100% 100%;
		}
		.go_goods_detail { display: none;}
		.goods .go_goods_detail{display: block;}
		.goods .go_search{display: none;}
		.close_btn {
			width: 30px;
			height: 30px;
			position: absolute;
			left: 50%;
			bottom: -40px;
			transform: translateX(-50%);
		}
	</style>
</head>
<body>
	<div class="yt-popup-bg" >
		<div class="yt-search-con " id="box">
			<div class=" between center middle search_bar ">
				<div class="yt-search-title" >智能搜索优惠券</div>
				<div class="yt-search-title-s" id="title">猜你想找以下商品</div>
			</div>
			<div class="row middle bg">
				<img class="goods-img" src="" id="goods-img">
				<div class="yt-search-info yj-elip-2 flex1" id="info">加载中...</div>
			</div>
			<div class="yj-clearfix">
				<!-- <div class="cancel yt-search-cancle" id="btn1">取消</div> -->
				<!-- <div class="goSearch yt-search-confirm" id="btn2">搜索</div>
				<div class="goGoodsDetail yt-search-confirm" id="btn3">购买</div> -->
				<div id="" class="comfirm_btn go_search">
					立即搜索
				</div>
				<div id="" class="comfirm_btn go_goods_detail">
					查看详情
				</div>
			</div>
			<img  class="close_btn" src="../../../static/image/common/close.png" >
		</div>
	</div>
	<script type="text/javascript" src="../js/webView.js"></script>
	<script type="text/javascript">
		function GetQueryString(name) {
		    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
		    var r = window.location.search.substr(1).match(reg);
		    if (r != null) return decodeURI(r[2]);
		    return null;
		}
		var str = decodeURIComponent(window.location.search).substr(1);
		var obj = JSON.parse(str);
		console.log(JSON.stringify(obj));
		if(obj.itemId&&obj.itemTitle&&obj.itemPic){
			document.getElementById('box').classList.add('goods');
			document.getElementById('title').innerHTML = '猜你想买';
			document.getElementById('goods-img').src = obj.itemPic;
			var itemId = obj.itemId;
		}
		// document.getElementById('box').classList.add('goods');
		// document.getElementById('goods-img').src = obj.itemPic;
		document.getElementById('info').innerText=obj.itemTitle;
		document.addEventListener('UniAppJSBridgeReady', function() {
			document.querySelector('.close_btn').addEventListener('click', function(e) {
				if (e.isTrusted) {
					plus.webview.currentWebview().close();
				}
			});
			document.querySelector('.go_search').addEventListener('click', function(evt) { 
				uni.navigateTo({
					url: "/pages/search/content?type=1&search=" + obj.itemTitle
				});
				plus.webview.currentWebview().close();
			});
			document.querySelector('.go_goods_detail').addEventListener('click', function(evt) {
				uni.navigateTo({
					url: "/pages/detail/index?itemId=" + itemId
				});
				plus.webview.currentWebview().close();
			});
		});
	</script>
</body>
</html>